An asynchronous integration and event detection algorithm for simulating multi-agent hybrid systems