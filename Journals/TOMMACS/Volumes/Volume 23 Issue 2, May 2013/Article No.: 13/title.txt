Modeling BitTorrent-like systems with many classes of users