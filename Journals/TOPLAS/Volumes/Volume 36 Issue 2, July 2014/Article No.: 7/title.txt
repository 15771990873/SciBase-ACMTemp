Herding Cats: Modelling, Simulation, Testing, and Data Mining for Weak Memory