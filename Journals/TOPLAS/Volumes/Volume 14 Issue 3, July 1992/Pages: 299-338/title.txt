Experience with a software-defined machine architecture