A constraint-based approach to guarded algebraic data types