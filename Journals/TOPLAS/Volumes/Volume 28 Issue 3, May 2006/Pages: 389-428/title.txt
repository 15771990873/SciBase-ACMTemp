Type inference for unique pattern matching