On a Technique for Transparently Empowering Classical Compiler Optimizations on Multithreaded Code