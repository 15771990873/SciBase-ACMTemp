LOCKSMITH: Practical static race detection for C