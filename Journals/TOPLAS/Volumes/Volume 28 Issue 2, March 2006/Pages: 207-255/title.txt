Types for safe locking: Static race detection for Java