Mutatis Mutandis: Safe and predictable dynamic software updating