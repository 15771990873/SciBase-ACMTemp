Parsing and compiling using Prolog