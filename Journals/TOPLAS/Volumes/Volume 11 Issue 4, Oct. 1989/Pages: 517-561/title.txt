A generalization of Dijkstra's calculus