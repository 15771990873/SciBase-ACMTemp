Escape analysis for JavaTM: Theory and practice