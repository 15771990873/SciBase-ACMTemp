Polymorphic typing of variables and references