Encapsulating objects with confined types