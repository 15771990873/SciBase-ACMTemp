Safe: a semantic technique for transforming programs in the presence of errors