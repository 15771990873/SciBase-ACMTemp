Closure analysis in constraint form