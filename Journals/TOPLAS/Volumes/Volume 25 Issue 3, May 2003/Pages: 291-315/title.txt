A foundation for embedded languages