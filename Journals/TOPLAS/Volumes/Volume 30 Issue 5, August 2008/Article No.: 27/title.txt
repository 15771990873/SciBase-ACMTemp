A capability calculus for concurrency and determinism