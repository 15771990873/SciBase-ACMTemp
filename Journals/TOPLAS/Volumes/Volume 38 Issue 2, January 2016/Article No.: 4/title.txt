Verifying Custom Synchronization Constructs Using Higher-Order Separation Logic