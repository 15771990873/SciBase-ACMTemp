A formal approach to undo operations in programming languages