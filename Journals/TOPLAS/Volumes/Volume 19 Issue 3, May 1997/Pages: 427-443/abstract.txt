We introduce Kleene algebra with tests, an equational system for manipulating programs. We give a purely equational proof, using Kleene algebra with tests and commutativity conditions, of the following classical result: everywhileprogram can be simulated by a while program can be simulated by awhileprogram with at most onewhileloop. The proof illustrates the use of Kleene algebra with tests and commutativity conditions in program equivalence proofs.