How to efficiently implement dynamic circuit specialization systems