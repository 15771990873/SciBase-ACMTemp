Simplifying the design and automating the verification of pipelines with structural hazards