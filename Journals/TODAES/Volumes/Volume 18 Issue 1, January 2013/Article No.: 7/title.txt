Thermal prediction and adaptive control through workload phase detection