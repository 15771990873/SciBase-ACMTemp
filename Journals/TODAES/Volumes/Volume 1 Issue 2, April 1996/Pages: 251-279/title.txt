Optimal register assignment to loops for embedded code generation