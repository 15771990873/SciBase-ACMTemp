From VHDL to efficient and first-time-right designs: a formal approach