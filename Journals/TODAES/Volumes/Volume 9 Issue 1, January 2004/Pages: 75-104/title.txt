Manhattan-diagonal routing in channels and switchboxes