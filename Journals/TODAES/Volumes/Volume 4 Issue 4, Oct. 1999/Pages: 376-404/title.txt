A flexible datapath allocation method for architectural synthesis