The design of a query monitoring system