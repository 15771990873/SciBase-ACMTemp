Solving queries by tree projections