Personalizing queries based on networks of composite preferences