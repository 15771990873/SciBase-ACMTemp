Learning to detect events with Markov-modulated poisson processes