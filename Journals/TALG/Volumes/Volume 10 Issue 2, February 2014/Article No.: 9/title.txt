Race to idle: New algorithms for speed scaling with a sleep state