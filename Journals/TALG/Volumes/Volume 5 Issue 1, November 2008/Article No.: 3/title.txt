Competitive buffer management for shared-memory switches