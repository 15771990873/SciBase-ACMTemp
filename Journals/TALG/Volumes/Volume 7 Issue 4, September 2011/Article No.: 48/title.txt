An improved approximation algorithm for resource allocation