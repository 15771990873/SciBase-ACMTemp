The Scalable Commutativity Rule: Designing Scalable Software for Multicore Processors