Architecture and performance of server-directed transcoding