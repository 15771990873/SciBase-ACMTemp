XDuce is a statically typed programming language for XML processing. Its basic data values are XML documents, and its types (so-calledregular expression types) directly correspond to document schemas. XDuce also provides a flexible form ofregular expression pattern matching, integrating conditional branching, tag checking, and subtree extraction, as well as dynamic typechecking. We survey the principles of XDuce's design, develop examples illustrating its key features, describe its foundations in the theory of regular tree automata, and present a complete formal definition of its core, along with a proof of type safety.