Long-lived TCP connections via satellite: cross-layer bandwidth allocation, pricing, and adaptive control