Cross-layer optimization in TCP/IP networks