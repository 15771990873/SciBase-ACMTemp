Analysis of scale effects in peer-to-peer networks