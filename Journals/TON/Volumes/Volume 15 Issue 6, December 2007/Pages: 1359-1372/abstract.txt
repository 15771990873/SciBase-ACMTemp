We consider a wireless sensor network with energy constraints. We model the energy consumption in the transmitter circuit along with that for data transmission. We model the bottom three layers of the traditional networking stack--the link layer, the medium access control (MAC) layer, and the routing layer. Using these models, we consider the optimization of transmission schemes to maximize the network lifetime. We first consider the optimization of a single layer at a time, while keeping the other layers fixed. We make certain simplifying assumptions to decouple the layers and formulate optimization problems to compute a strategy that maximizes the network lifetime. We then extend this approach to cross-layer optimization of time division multiple access (TDMA) wireless sensor networks. In this case, we construct optimization problems to compute the optimal transmission schemes to an arbitrary degree of accuracy and efficiently. We then consider networks with interference, and propose methods to compute approximate solutions to the resulting optimization problems. We give numerical examples that illustrate the computational approaches as well as the benefits of cross-layer design in wireless sensor networks.