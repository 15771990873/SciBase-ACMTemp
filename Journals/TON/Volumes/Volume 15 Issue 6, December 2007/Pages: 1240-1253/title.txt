Distributed rate allocation for inelastic flows