Dynamic power allocation for maximizing throughput in energy-harvesting communication system