SOLOR: self-optimizing WLANs with legacy-compatible opportunistic relays