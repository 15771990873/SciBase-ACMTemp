Model-driven optimization of opportunistic routing