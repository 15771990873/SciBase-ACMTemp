A joint approach to routing metrics and rate adaptation in wireless mesh networks