Optimal scheduling for fair resource allocation in ad hoc networks with elastic and inelastic traffic