A flexible platform for hardware-aware network experiments and a case study on wireless network coding