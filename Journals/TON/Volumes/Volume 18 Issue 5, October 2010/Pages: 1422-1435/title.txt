Queue dynamics with window flow control