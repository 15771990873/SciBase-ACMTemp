Network classless time protocol based on clock offset optimization