A peer-to-peer (P2P) live streaming system faces a big challenge under flash crowds. When a flash crowd occurs, the sudden arrival of numerous peers may starve the upload capacity of the system, hurt its quality of service, and even cause system collapse. This paper provides a comprehensive study on the performance of P2P live streaming systems under flash crowds. By modeling the systems using a fluid model, we study the system capacity, peer startup latency, and system recovery time of systems with and without admission control for flash crowds, respectively. Our study demonstrates that, without admission control, a P2P live streaming system has limited capacity to handle flash crowds. We quantify this capacity by the largest flash crowd (measured in shock level) that the system can handle, and further find this capacity is independent of system initial state while decreasing as departure rate of stable peer increases, in a power-law relationship. We also establish the mathematical relationship of flash crowd size to the worst-case peer startup latency and system recovery time. For a system with admission control, we prove that it can recover stability under flash crowds of any sizes. Moreover, its worst-case peer startup latency and system recovery time increase logarithmically with the flash crowd size. Based on the analytical results, we present detailed flash crowd handling strategies, which can be used to achieve satisfying peer startup performance while keeping system stability in the presence of flash crowds under different circumstances.