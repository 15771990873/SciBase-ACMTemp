Adaptive packet marking for maintaining end-to-end throughput in a differentiated-services internet