Automated generation of polyhedral process networks from affine nested-loop programs with dynamic loop bounds