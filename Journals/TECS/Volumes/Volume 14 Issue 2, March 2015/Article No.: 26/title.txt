Factored Planning: From Automata to Petri Nets