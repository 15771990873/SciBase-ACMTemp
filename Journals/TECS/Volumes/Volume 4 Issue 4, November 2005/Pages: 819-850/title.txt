Compiler-directed high-level energy estimation and optimization