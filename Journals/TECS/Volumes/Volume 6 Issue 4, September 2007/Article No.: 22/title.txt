Software design patterns for TinyOS