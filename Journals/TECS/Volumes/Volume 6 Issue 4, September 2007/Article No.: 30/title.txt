Energy optimal speed control of a producer--consumer device pair