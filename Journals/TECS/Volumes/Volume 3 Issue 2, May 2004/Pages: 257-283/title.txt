A design flow for partially reconfigurable hardware