A design framework for real-time embedded systems with code size and energy constraints