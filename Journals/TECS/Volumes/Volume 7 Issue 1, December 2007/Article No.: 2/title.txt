Energy-optimizing source code transformations for operating system-driven embedded software