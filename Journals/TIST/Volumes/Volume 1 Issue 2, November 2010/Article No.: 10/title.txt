Applying planning to interactive storytelling: Narrative control using state constraints