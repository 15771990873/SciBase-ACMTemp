Planar graph decomposition and all pairs shortest paths