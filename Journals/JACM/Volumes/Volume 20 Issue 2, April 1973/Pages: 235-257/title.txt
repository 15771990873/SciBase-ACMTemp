A Formalization of Transition Diagram Systems