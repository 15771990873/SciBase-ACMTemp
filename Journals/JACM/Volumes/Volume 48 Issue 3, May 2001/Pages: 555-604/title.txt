A modal analysis of staged computation