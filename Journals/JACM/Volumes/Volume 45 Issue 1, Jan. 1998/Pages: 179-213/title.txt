A new general derandomization method