A Unified Approach to Path Problems