Compositional refinement of interactive systems