Infinitesimal perturbation analysis for general discrete event systems