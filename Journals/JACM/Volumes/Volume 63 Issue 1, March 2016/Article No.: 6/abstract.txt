In this article, we solve theancestry-labeling scheme problem, which aims at assigning the shortest possible labels (bit strings) to nodes of rooted trees, so ancestry queries between any two nodes can be answered by inspecting their assigned labels only. This problem was introduced more than 20 years ago by Kannan et al. [1988] and is among the most well-studied problems in the field of informative labeling schemes. We construct an ancestry-labeling scheme forn-node trees with label size log2n+O(log logn) bits, thus matching the log2n+ Ω(log logn) bits lower bound given by Alstrup et al. [2003]. Our scheme is based on a simplified ancestry scheme that operates extremely well on a restricted set of trees. In particular, for the set ofn-node trees with a depth of at mostd, the simplified ancestry scheme enjoys label size of log2n+ 2log2d+O(1) bits. Since the depth of most XML trees is at most some small constant, such an ancestry scheme may be of practical use. In addition, we also obtain anadjacency-labeling scheme that labelsn-node trees of depthdwith labels of size log2n+ 3log2d+O(1) bits. All our schemes assign the labels in linear time, and guarantee that any query can be answered in constant time.Finally, our ancestry scheme finds applications to the construction of smalluniversalpartially ordered sets (posets). Specifically, for any fixed integerk, it enables the construction of a universal poset of sizeÕ(nk) for the family ofn-element posets with a tree dimension of at mostk. Up to lower-order terms, this bound is tight thanks to a lower bound ofnk−o(1)by to Alon and Scheinerman [1988].