Critical Path Scheduling with Resource and Processor Constraints