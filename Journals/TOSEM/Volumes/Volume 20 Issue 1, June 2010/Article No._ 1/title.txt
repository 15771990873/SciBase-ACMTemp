Types and modularity for implicit invocation with implicit announcement