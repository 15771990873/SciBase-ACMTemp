Model-based synthesis of control software from system-level formal specifications