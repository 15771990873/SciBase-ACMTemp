Manyembedded systemsare indeedsoftware-based control systems, that is, control systems whose controller consists ofcontrol softwarerunning on a microcontroller device. This motivates investigation onformal model-based designapproaches for automatic synthesis of embedded systems control software. We present an algorithm, along with a tool QKS implementing it, that from a formal model (as adiscrete-time linear hybrid system) of the controlled system (plant),implementation specifications(that is, number of bits in theAnalog-to-Digital, AD, conversion) andsystem-level formal specifications(that is, safety and liveness requirements for theclosed loop system) returns correct-by-construction control software that has aWorst-Case Execution Time(WCET) linear in the number of AD bits and meets the given specifications. We show feasibility of our approach by presenting experimental results on using it to synthesize control software for a buck DC-DC converter, a widely used mixed-mode analog circuit, and for the inverted pendulum.