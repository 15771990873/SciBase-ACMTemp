ADAPT: A framework for coscheduling multithreaded programs