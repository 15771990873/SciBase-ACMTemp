Optimizing Control Transfer and Memory Virtualization in Full System Emulators