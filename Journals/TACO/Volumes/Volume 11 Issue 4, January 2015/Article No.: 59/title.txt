Making the Most of SMT in HPC: System- and Application-Level Perspectives