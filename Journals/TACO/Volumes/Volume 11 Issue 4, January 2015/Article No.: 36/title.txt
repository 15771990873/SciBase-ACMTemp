Building and Optimizing MRAM-Based Commodity Memories