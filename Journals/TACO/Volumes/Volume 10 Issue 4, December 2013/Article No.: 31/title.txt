Dynamic microarchitectural adaptation using machine learning