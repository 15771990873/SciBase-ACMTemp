Automatic data allocation and buffer management for multi-GPU machines