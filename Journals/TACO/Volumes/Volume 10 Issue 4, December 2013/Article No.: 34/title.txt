Hardware support for accurate per-task energy metering in multicore systems