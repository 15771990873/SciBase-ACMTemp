Online diagnosis of hard faults in microprocessors