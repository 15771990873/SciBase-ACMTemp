A transactional memory with automatic performance tuning