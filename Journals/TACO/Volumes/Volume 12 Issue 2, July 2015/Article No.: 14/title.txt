An Optimizing Code Generator for a Class of Lattice-Boltzmann Computations