Efficient hardware code generation for FPGAs