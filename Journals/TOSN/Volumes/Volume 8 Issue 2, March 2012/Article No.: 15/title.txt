Quantization, channel compensation, and optimal energy allocation for estimation in sensor networks