Ldr2Hdr: on-the-fly reverse tone mapping of legacy video and photographs