Geometry-aware direction field processing